{% extends "base.html" %}

{% block content %}
<p>Hello, Mark</p>

<p>Add Transaction</p>

<form action="/transactions" method="POST">

    <label for="merchant">Merchant</label>
    <input type="text" id="merchant" name="merchant" placeholder="Merchant Name">

    <label for="amount">Amount</label>
    <input type="number" step="0.1" id="amount" name="amount" placeholder="Amount" required>

    <input type="date" id="date" name="date">

    <input list="tag-list" id="tag" name="tag" placeholder="Select a category" required>

    <datalist id="tag-list">
        <option value="General">
        <option value="Groceries">
        <option value="Eating Out">
        <option value="Transportation">
        <option value="Auto Care">
        <option value="Takeaway">
        <option value="Entertainment">
        <option value="Shopping">
        <option value="Personal Care">
        <option value="Holidays">
    </datalist>

    <input type="submit" value="Add Transaction">

</form>

<form action="/transactions/filter" method="POST">

    <label for="filter">Month: </label>

    <select name="filter" id="filter">
        <option value="" selected>Select a month</option>
        <option value="01">January</option>
        <option value="02">February</option>
        <option value="03">March</option>
        <option value="04">April</option>
        <option value="05">May</option>
        <option value="06">June</option>
        <option value="07">July</option>
        <option value="08">August</option>
        <option value="09">September</option>
        <option value="10">October</option>
        <option value="11">November</option>
        <option value="12">December</option>
    </select>

    <button type="submit">Filter</button>

</form>

<p>All Transactions</p>
<br>
<hr>

    {% for transaction in transactions %}

        <div class="transactions-container">
            <div class="transaction-info">
                <p>{{ transaction.merchant.name }}</p>
                <p>{{ transaction.date }}</p>
                <p>{{ transaction.tag }}</p>
            </div>

            <a href="/transactions/{{transaction.id}}"><button>More Info</button></a>

            <!-- <form action="/transactions/{{transaction.id}}/delete" method="POST">
                <button type="submit">Remove</button>
            </form> -->

            <div class="transaction-amount">
                <p>Â£{{ transaction.amount }}</p>
            </div>
            <hr>
        </div>
        
    {% endfor %}

    <p><b>Total:</b> {{ total }}</p>

{% endblock %}